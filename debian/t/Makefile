ifneq (,$(filter $(DEB_HOST_ARCH),i386 amd64))
ARCHFLAGS	+= -msse2 -msse
endif
CFLAGS		+= -I../.. $(OPENCLFLAGS) $(ARCHFLAGS)
CXXFLAGS	+= -std=c++11 -I../.. $(OPENCLFLAGS) $(ARCHFLAGS)

OPENCL_CLH_FLAGS_1_0 = -DCL_USE_DEPRECATED_OPENCL_1_0_APIS
OPENCL_CLH_FLAGS_1_1 = -DCL_USE_DEPRECATED_OPENCL_1_1_APIS
OPENCL_CLH_FLAGS_1_2 = -DCL_USE_DEPRECATED_OPENCL_1_2_APIS
OPENCL_CLH_FLAGS_2_0 = -DCL_USE_DEPRECATED_OPENCL_2_0_APIS
OPENCL_CLH_FLAGS_2_1 = -DCL_USE_DEPRECATED_OPENCL_2_1_APIS
OPENCL_CLH_FLAGS_2_2 = -DCL_USE_DEPRECATED_OPENCL_2_2_APIS

check:
	$(MAKE) compile_opencl_h
	$(MAKE) compile_opencl_h OPENCLFLAGS="-DCL_TARGET_OPENCL_VERSION=100"
	$(MAKE) compile_opencl_h OPENCLFLAGS="-DCL_TARGET_OPENCL_VERSION=110"
	$(MAKE) compile_opencl_h OPENCLFLAGS="-DCL_TARGET_OPENCL_VERSION=120"
	$(MAKE) compile_opencl_h OPENCLFLAGS="-DCL_TARGET_OPENCL_VERSION=200"
	$(MAKE) compile_opencl_h OPENCLFLAGS="-DCL_TARGET_OPENCL_VERSION=210"
	$(MAKE) compile_opencl_h OPENCLFLAGS="-DCL_TARGET_OPENCL_VERSION=220"
	$(MAKE) compile_opencl_h OPENCLFLAGS="-DCL_TARGET_OPENCL_VERSION=300"
	$(MAKE) compile_opencl_h OPENCLFLAGS="$(OPENCL_CLH_FLAGS_1_0)"
	$(MAKE) compile_opencl_h OPENCLFLAGS="$(OPENCL_CLH_FLAGS_1_1)"
	$(MAKE) compile_opencl_h OPENCLFLAGS="$(OPENCL_CLH_FLAGS_1_2)"
	$(MAKE) compile_opencl_h OPENCLFLAGS="$(OPENCL_CLH_FLAGS_2_0)"
	$(MAKE) compile_opencl_h OPENCLFLAGS="$(OPENCL_CLH_FLAGS_2_1)"
	$(MAKE) compile_opencl_h OPENCLFLAGS="$(OPENCL_CLH_FLAGS_2_2)"

compile_opencl_h:
	$(CC) $(CPPFLAGS) $(CFLAGS) -c opencl_h.c
	$(CXX) $(CPPFLAGS) $(CXXFLAGS) -c opencl_h.cpp

clean:
	$(RM) *.o
